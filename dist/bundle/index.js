var autoAnimate=function(e){"use strict";var t=function(){return t=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},t.apply(this,arguments)};function n(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))}function o(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}function r(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var i=function(){this.TGT="__aa_tgt",this.DEL="__aa_del",this.initKeyframe={indent:"default",enter:[{transform:"scale(.98)",opacity:.3},{transform:"scale(0.98)",opacity:.7,offset:.5},{transform:"scale(1)",opacity:1}],exit:[{transform:"scale(1)",opacity:1},{transform:"scale(.98)",opacity:0}]},this.root=document.documentElement,this.parents=new Set,this.enabled=new WeakSet,this.coords=new WeakMap,this.animations=new WeakMap,this.keyframeMapping=new WeakMap,this.defaultKeyframe=new WeakMap,this.siblings=new WeakMap,this.debounce=new WeakMap,this.intervals=new WeakMap,this.intersections=new WeakMap,this.options=new WeakMap};function a(e){return Number(e.replace(/[^0-9.\-]/g,""))}function s(e,t,n){var o=t.width,r=t.height,i=n.width,s=n.height,c=getComputedStyle(e);if("content-box"===c.getPropertyValue("box-sizing")){var u=a(c.paddingTop)+a(c.paddingBottom)+a(c.borderTopWidth)+a(c.borderBottomWidth),d=a(c.paddingLeft)+a(c.paddingRight)+a(c.borderRightWidth)+a(c.borderLeftWidth);o-=d,i-=d,r-=u,s-=u}return[o,i,r,s].map(Math.round)}function c(e){var t=e.getBoundingClientRect();return{top:t.top+window.scrollY,left:t.left+window.scrollX,width:t.width,height:t.height}}function u(e,t,n){var o=t.TGT;n||o in e?n&&!(o in n)&&Object.defineProperty(n,o,{value:e}):Object.defineProperty(e,o,{value:e})}var d=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];n.forEach((function(n){return n(e,t.options.has(e))}));for(var r=function(o){var r=e.children.item(o);r&&n.forEach((function(e){return e(r,t.options.has(r))}))},i=0;i<e.children.length;i++)r(i)},l=function(e){var t=this;this.store=e,this.animate=function(e){var n,o=e.isConnected,r=t.store.coords.has(e);o&&t.store.siblings.has(e)&&t.store.siblings.delete(e),t.store.animations.has(e)&&(null===(n=t.store.animations.get(e))||void 0===n||n.cancel()),r&&o?t.remain(e):r&&!o?t.remove(e):t.add(e)},this.updateAllPos=function(){clearTimeout(t.store.debounce.get(t.store.root)),t.store.debounce.set(t.store.root,setTimeout((function(){t.store.parents.forEach((function(e){return d(e,t.store,(function(e){return t.lowPriority((function(){return t.updatePos(e)}))}))}))}),100))},this.updatePos=function(e){clearTimeout(t.store.debounce.get(e));var r=t.getOptions(e),i="function"==typeof r?500:r.duration;t.store.debounce.set(e,setTimeout((function(){return n(t,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:t=this.store.animations.get(e),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,null==t?void 0:t.finished];case 2:return n.sent(),this.store.coords.set(e,c(e)),this.observePosition(e),[3,4];case 3:return n.sent(),[3,4];case 4:return[2]}}))}))}),i))},this.poll=function(e){setTimeout((function(){t.store.intervals.set(e,setInterval((function(){return t.lowPriority(t.updatePos.bind(null,e))}),2e3))}),Math.round(2e3*Math.random()))},this.remain=function(e){var n,o=t.store.coords.get(e),r=c(e);if(!t.isEnabled(e))return t.store.coords.set(e,r);if(!o)return!1;var i=t.getOptions(e);if("function"!=typeof i){var a=o.left-r.left,u=o.top-r.top,d=s(e,o,r),l=d[0],f=d[1],p=d[2],h=d[3],m={transform:"translate(".concat(a,"px, ").concat(u,"px)")},g={transform:"translate(0, 0)"};l!==f&&(m.width="".concat(l,"px"),g.width="".concat(f,"px")),p!==h&&(m.height="".concat(p,"px"),g.height="".concat(h,"px")),n=e.animate([m,g],{duration:i.duration,easing:i.easing})}else(n=new Animation(i(e,"remain",o,r))).play();t.store.animations.set(e,n),t.store.coords.set(e,r),n.addEventListener("finish",t.updatePos.bind(null,e))},this.remove=function(e){var n;if(t.store.siblings.has(e)&&t.store.coords.has(e)){var o=t.store.siblings.get(e)||[],r=o[0],i=o[1];Object.defineProperty(e,t.store.DEL,{value:!0}),i&&i.parentNode&&i.parentNode instanceof Element?i.parentNode.insertBefore(e,i):r&&r.parentNode?r.parentNode.appendChild(e):null===(n=t.getTarget(e))||void 0===n||n.appendChild(e);var a=function(){var n;e.remove(),t.store.coords.delete(e),t.store.siblings.delete(e),t.store.animations.delete(e),null===(n=t.store.intersections.get(e))||void 0===n||n.disconnect()};if(!t.isEnabled(e))return a();var s,c=t.deletePosition(e),u=c[0],d=c[1],l=c[2],f=c[3],p=t.getOptions(e),h=t.store.coords.get(e);if(Object.assign(e.style,{position:"absolute",top:"".concat(u,"px"),left:"".concat(d,"px"),width:"".concat(l,"px"),height:"".concat(f,"px"),margin:0,pointerEvents:"none",transformOrigin:"center",zIndex:100}),"function"!=typeof p){var m=t.getKeyframeOpt(e);s=e.animate(m.exit,{duration:p.duration,easing:"ease-out"})}else(s=new Animation(p(e,"remove",h))).play();t.store.animations.set(e,s),s.addEventListener("finish",a)}},this.add=function(e){var n=c(e);t.store.coords.set(e,n);var o=t.getOptions(e);if(t.isEnabled(e)){var r;if("function"!=typeof o){var i=t.getKeyframeOpt(e);if(i.delay){e.setAttribute("style","opacity: 0");var a=setTimeout((function(){e.setAttribute("style","opacity: 1"),clearTimeout(a)}),i.delay+200)}r=e.animate(i.enter,{duration:i.duration||o.duration,easing:"ease-in",delay:i.delay||0})}else(r=new Animation(o(e,"add",n))).play();t.store.animations.set(e,r),r.addEventListener("finish",(function(){t.updatePos(e)}))}},this.getOptions=function(e){var n=t.store.TGT;return n in e&&t.store.options.has(e[n])?t.store.options.get(e[n]):{duration:250,easing:"ease-in-out"}},this.lowPriority=function(e){"function"==typeof requestIdleCallback?requestIdleCallback((function(){return e()})):requestAnimationFrame((function(){return e()}))},this.observePosition=function(e){var n=t.store.intersections.get(e);null==n||n.disconnect();var o=t.store.coords.get(e),r=0;o||(o=c(e),t.store.coords.set(e,o));var i=t.store.root,a=i.offsetWidth,s=i.offsetHeight,u=[o.top-5,a-(o.left+5+o.width),s-(o.top+5+o.height),o.left-5].map((function(e){return"".concat(-1*Math.floor(e),"px")})).join(" "),d=new IntersectionObserver((function(){++r>1&&t.updatePos(e)}),{root:t.store.root,rootMargin:u,threshold:1});d.observe(e),t.store.intersections.set(e,d)},this.getTarget=function(e){return t.store.TGT in e?e[t.store.TGT]:void 0},this.isEnabled=function(e){var n=t.getTarget(e);return!!n&&t.store.enabled.has(n)},this.deletePosition=function(e){for(var n=t.store.coords.get(e),o=s(e,n,c(e)),r=o[0],i=o[2],u=e.parentElement;u&&("static"===getComputedStyle(u).position||u instanceof HTMLBodyElement);)u=u.parentElement;u||(u=document.body);var d=getComputedStyle(u),l=t.store.coords.get(u)||c(u);return[Math.round(n.top-l.top)-a(d.borderTopWidth),Math.round(n.left-l.left)-a(d.borderLeftWidth),r,i]},this.getKeyframeOpt=function(e){var n=t.store.initKeyframe;if(e.parentElement){var o=t.store.keyframeMapping.get(e.parentElement),r=t.store.defaultKeyframe.get(e.parentElement),i=e.getAttribute("data-indent");o&&i&&(n=o[i]||t.store.initKeyframe),r&&(o&&void 0===n.delay?n.delay=r.delay:n=r||t.store.initKeyframe)}return n},this.store=e},f=function(e,t){var n=this;this.store=e,this.animate=t,this.resizeElement=function(e){var t;null===(t=n.resize)||void 0===t||t.observe(e)},this.handleMutations=function(e){var t,o,i,a=(t=e,o=n.store,i=o.DEL,!t.reduce((function(e,t){return r(r(r([],e,!0),Array.from(t.addedNodes),!0),Array.from(t.removedNodes),!0)}),[]).every((function(e){return"#comment"===e.nodeName}))&&t.reduce((function(e,t){if(!1===e)return!1;if(t.target instanceof Element){if(u(t.target,o),!e.has(t.target)){e.add(t.target);for(var n=0;n<t.target.children.length;n++)if(r=t.target.children.item(n)){if(i in r)return!1;u(t.target,o,r),e.add(r)}}if(t.removedNodes.length)for(n=0;n<t.removedNodes.length;n++){var r=t.removedNodes[n];if(i in r)return!1;r instanceof Element&&(e.add(r),u(t.target,o,r),o.siblings.set(r,[t.previousSibling,t.nextSibling]))}}return e}),new Set));a&&a.forEach((function(e){n.start(e)}))},this.handleResizes=function(e){e.forEach((function(e){e.target===n.store.root&&n.animate.updateAllPos(),n.store.coords.has(e.target)&&n.animate.updatePos(e.target)}))},this.start=function(e){n.animate.animate(e)},this.store=e,this.animate=t,"undefined"!=typeof window&&(this.mutations=new MutationObserver(this.handleMutations),this.resize=new ResizeObserver(this.handleResizes),this.resize.observe(this.store.root))},p=new function(){var e=this;this.containers=new WeakMap,this.getContainer=function(t){return e.containers.has(t)||e.injectContainer(t),e.containers.get(t)},this.dispose=function(t){e.containers.has(t)&&e.containers.delete(t)},this.injectContainer=function(t){var n=new i,o=new l(n),r=new f(n,o);e.containers.set(t,{store:n,animate:o,observe:r})}};function h(e,n){var o=p.getContainer(e),r=o.store,i=o.animate,a=o.observe;if(a.resize&&a.mutations){var s="function"==typeof n;if(!window.matchMedia("(prefers-reduced-motion: reduce)").matches){if(r.enabled.add(e),"static"===getComputedStyle(e).position&&Object.assign(e.style,{position:"relative"}),s)r.options.set(e,n);else if(r.options.set(e,t({duration:500,easing:"ease-in-out"},n)),n&&(null==n?void 0:n.animateOptions))if(Array.isArray(n.animateOptions)){var c={};n.animateOptions.forEach((function(e){c[e.indent]=e})),r.keyframeMapping.set(e,c)}else r.defaultKeyframe.set(e,t({delay:n.delay},n.animateOptions));d(e,r,i.updatePos,i.poll,a.resizeElement),a.mutations.observe(e,{childList:!0}),r.parents.add(e)}}return Object.freeze({parent:e,enable:function(){r.enabled.add(e)},disable:function(){r.enabled.delete(e)},isEnabled:function(){return r.enabled.has(e)},dispose:function(){p.dispose(e)}})}return e.autoAnimate=h,e.default=h,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
